!function(){function t(){$("#cornerMenu").toggleClass("show")}function e(){$(".hiddenEmail").html(rot13rot5Encode('<n uers="znvygb:uryyb@yhkybbc.pbz" pynff="yvaxNavz">uryyb@yhkybbc.pbz</n>')),$(".hiddenEmail2").html(rot13rot5Encode('<n uers="znvygb:wbof@yhkybbc.pbz" pynff="yvaxNavz">wbof@yhkybbc.pbz</n>')),$(".hiddenPhoneLA").html(rot13rot5Encode('<n uers="gry:+68657111092" pynff="yvaxNavz">865.711.1092</n>')),$(".hiddenPhoneNY").html(rot13rot5Encode('<n uers="gry:+61919393851" pynff="yvaxNavz">191.939.3851</n>'))}function n(){$(".parallax").each(function(t){var e={};e.element=$(this),e.height=e.element.height(),e.posTop=parseInt(e.element.css("top")),e.offset=e.element.attr("data-offset"),e.start=e.element.offset().top+e.posTop,e.element.hasClass("cropped")?e.end=e.start+e.element.parent().innerHeight():e.end=e.start+e.height,e.isShown=function(t,n){return t+n>e.start&&t<e.end},e.getOffset=function(t,n){var o=(t+n-e.start)/e.end;return Math.floor(e.offset*o)},e.setPos=function(t){e.element.css("top",e.posTop+t)},v.push(e)})}function o(){var t=$(window).scrollTop(),e=window.innerHeight;0===t?$("body").addClass("top"):$("body").removeClass("top"),a(t,e)}function a(t,e){$.each(v,function(n,o){o.isShown(t,e)&&o.setPos(o.getOffset(t,e))})}function i(){$(".fitVid").fitVids(),$(".bgVid").each(function(){var t=$(this),e=t.get(0),n=$(this).attr("data-file"),o=$(this).attr("poster"),a=t.parent();$("html").hasClass("touch")?(t.remove(),a.css("background-image","url('"+o+"')"),console.log("foo")):(e.src=n,e.addEventListener("canplaythrough",function(){e.play(),t.removeClass("fadeOut")},!1),e.addEventListener("error",function(){console.log(e.error),t.remove(),a.css("background-image","url('"+o+"')")},!1),e.load())})}function r(t){var e=$("#pageCover .coverImage"),n=t||$("#pageCover .coverImage video, #pageCover .coverImage img"),o=e.innerWidth()/e.innerHeight();n.each(function(){var t=$(this),e=t.innerWidth()/t.innerHeight();o>e?t.addClass("stretchWide"):t.removeClass("stretchWide")})}function s(){var t=$("#pageCover .coverImage img");if(t.length){var e=t.attr("src");t.parent().css("background-image","url('"+e+"')"),t.remove()}}function c(t){window.location.href=t}function d(t){$("body").removeClass("showBody"),setTimeout(function(){c(t)},900)}function u(){var t=$("#mcEmail").val(),e="https://lux-loop.us9.list-manage.com/subscribe?u=932da86c44803a133780827a6&id=85c35a3d5a&MERGE0="+encodeURIComponent(t);window.open(e)}function f(){$("img.svg").each(function(){var t=jQuery(this),e=t.attr("id"),n=t.attr("class"),o=t.attr("data-dest"),a=t.attr("src");$.get(a,function(a){var i=jQuery(a).find("svg");"undefined"!=typeof e&&(i=i.attr("id",e)),"undefined"!=typeof n&&(i=i.attr("class",n+" replaced-svg")),"undefined"!=typeof o&&(i=i.attr("data-dest",o)),i=i.removeAttr("xmlns:a"),t.replaceWith(i)},"xml")})}function l(){$("img.caption").each(function(){var t=$(this),e=t.attr("src"),n=t.attr("class"),o=t.attr("data-caption");t.replaceWith('<div class="imageWithCaption"><img src="'+e+'"><div class="captionElement '+n+'">'+o+"</div></div>")})}function h(){$(".featuredProject .buttonImg").each(function(){var t=$(this),e=t.css("content");if(""!=e&&void 0!=e){console.log(e);var n=new Image;n.src=e.replace(/"/g,""),n.onload=function(){console.log("Loaded Gif"),t.css("background-image","url("+e+")")},n.onerror=function(){console.log("Failed To Load Gif")}}})}var g,v=[];$(document).ready(function(){$(window).scrollIntent(),$("body").addClass("showBody"),f(),n(),s(),r(),l(),e(),i(),h(),o()}),$(".menuToggle").on("click",function(e){t()}),$(window).on("scroll",function(){window.requestAnimationFrame(o)}),$(".expandButton").on("click",function(t){t.preventDefault();var e=t.target.getAttribute("href");g=setTimeout(function(){c(e)},3e3),$(this).addClass("expand")}),$("#mcButton").on("click",function(t){t.preventDefault(),u()}),$("#mcEmail").on("keyup",function(t){t.preventDefault(),13==t.keyCode&&u()}),$(".expandButton").bind("oanimationend animationend webkitAnimationEnd",function(t){var e=t.target.getAttribute("href");e&&(clearTimeout(g),d(e))}),$(".fadeLink").on("click",function(t){t.preventDefault();var e=t.target.getAttribute("href")||t.target.getAttribute("data-dest")||$(this).closest("a:has(*[data-dest])").children("[data-dest]").first().attr("data-dest");null!==e&&void 0!==e&&d(e)}),$(window).resize(function(){r()}),window.onpageshow=function(t){t.persisted&&window.location.reload()}}();